<!-- Generated by documentation.js. Update this documentation by updating the source code. -->

### Table of Contents

-   [MapboxGeocoder][1]
    -   [Parameters][2]
    -   [Examples][3]
    -   [addTo][4]
        -   [Parameters][5]
    -   [clear][6]
        -   [Parameters][7]
    -   [query][8]
        -   [Parameters][9]
    -   [setInput][10]
        -   [Parameters][11]
    -   [setProximity][12]
        -   [Parameters][13]
    -   [getProximity][14]
    -   [setRenderFunction][15]
        -   [Parameters][16]
    -   [getRenderFunction][17]
    -   [setLanguage][18]
        -   [Parameters][19]
    -   [getLanguage][20]
    -   [getZoom][21]
    -   [setZoom][22]
        -   [Parameters][23]
    -   [getFlyTo][24]
    -   [setFlyTo][25]
        -   [Parameters][26]
    -   [getPlaceholder][27]
    -   [setPlaceholder][28]
        -   [Parameters][29]
    -   [getBbox][30]
    -   [setBbox][31]
        -   [Parameters][32]
    -   [getCountries][33]
    -   [setCountries][34]
        -   [Parameters][35]
    -   [getTypes][36]
    -   [setTypes][37]
        -   [Parameters][38]
    -   [getMinLength][39]
    -   [setMinLength][40]
        -   [Parameters][41]
    -   [getLimit][42]
    -   [setLimit][43]
        -   [Parameters][44]
    -   [getFilter][45]
    -   [setFilter][46]
        -   [Parameters][47]
    -   [setOrigin][48]
        -   [Parameters][49]
    -   [getOrigin][50]
    -   [on][51]
        -   [Parameters][52]
    -   [off][53]
        -   [Parameters][54]
-   [relatedTarget][55]

## MapboxGeocoder

A geocoder component using Mapbox Geocoding API

### Parameters

-   `options` **[Object][56]** 
    -   `options.accessToken` **[String][57]** Required.
    -   `options.origin` **[String][57]** Use to set a custom API origin. Defaults to [https://api.mapbox.com][58].
    -   `options.mapboxgl` **[Object][56]?** A [mapbox-gl][59] instance to use when creating [Markers][60]. Required if `options.marker` is true.
    -   `options.zoom` **[Number][61]** On geocoded result what zoom level should the map animate to when a `bbox` isn't found in the response. If a `bbox` is found the map will fit to the `bbox`. (optional, default `16`)
    -   `options.flyTo` **([Boolean][62] \| [Object][56])?** If false, animating the map to a selected result is disabled. If true, animating the map will use the default animation parameters. If an object, the object will be passed to the map method to specify a custom animation when a result is selected.
    -   `options.placeholder` **[String][57]** Override the default placeholder attribute value. (optional, default `"Search"`)
    -   `options.proximity` **[Object][56]?** a proximity argument: this is
        a geographical point given as an object with latitude and longitude
        properties. Search results closer to this point will be given
        higher priority.
    -   `options.trackProximity` **[Boolean][62]** If true, the geocoder proximity will automatically update based on the map view for zoom levels 10 and above. To enable proximity bias for all zoom levels you need to set the `options.proximity` yourself. (optional, default `true`) (optional, default `true`)
    -   `options.collapsed` **[Boolean][62]** If true, the geocoder control will collapse until hovered or in focus. (optional, default `false`)
    -   `options.clearAndBlurOnEsc` **[Boolean][62]** If true, the geocoder control will clear it's contents and blur when user presses the escape key. (optional, default `false`)
    -   `options.clearOnBlur` **[Boolean][62]** If true, the geocoder control will clear its value when the input blurs. (optional, default `false`)
    -   `options.bbox` **[Array][63]?** a bounding box argument: this is
        a bounding box given as an array in the format [minX, minY, maxX, maxY].
        Search results will be limited to the bounding box.
    -   `options.countries` **[string][57]?** a comma separated list of country codes to
        limit results to specified country or countries.
    -   `options.types` **[string][57]?** a comma seperated list of types that filter
        results to match those specified. See [https://docs.mapbox.com/api/search/#data-types][64]
        for available types.
    -   `options.minLength` **[Number][61]** Minimum number of characters to enter before results are shown. (optional, default `2`)
    -   `options.limit` **[Number][61]** Maximum number of results to show. (optional, default `5`)
    -   `options.language` **[string][57]?** Specify the language to use for response text and query result weighting. Options are IETF language tags comprised of a mandatory ISO 639-1 language code and optionally one or more IETF subtags for country or script. More than one value can also be specified, separated by commas.
    -   `options.filter` **[Function][65]?** A function which accepts a Feature in the [Carmen GeoJSON][66] format to filter out results from the Geocoding API response before they are included in the suggestions list. Return `true` to keep the item, `false` otherwise.
    -   `options.localGeocoder` **[Function][65]?** A function accepting the query string which performs local geocoding to supplement results from the Mapbox Geocoding API. Expected to return an Array of GeoJSON Features in the [Carmen GeoJSON][66] format.
    -   `options.reverseMode` **(`"distance"` \| `"score"`)** Set the factors that are used to sort nearby results. (optional, default `'distance'`)
    -   `options.reverseGeocode` **[boolean][62]?** Enable reverse geocoding. Defaults to false. Expects coordinates to be lat, lon.
    -   `options.enableEventLogging` **[Boolean][62]** Allow Mapbox to collect anonymous usage statistics from the plugin (optional, default `true`)
    -   `options.marker` **([Boolean][62] \| [Object][56])** If `true`, a [Marker][60] will be added to the map at the location of the user-selected result using a default set of Marker options.  If the value is an object, the marker will be constructed using these options. If `false`, no marker will be added to the map. Requires that `options.mapboxgl` also be set. (optional, default `true`)
    -   `options.render` **[Function][65]?** A function that specifies how the results should be rendered in the dropdown menu. Accepts a single [Carmen GeoJSON][66] object  as input and return a string. Any html in the returned string will be rendered.
    -   `options.getItemValue` **[Function][65]?** A function that specifies how the selected result should be rendered in the search bar. This function should accept a single [Carmen GeoJSON][66] object  as input and return a string. HTML tags in the output string will not be rendered.
    -   `options.mode` **[String][57]** A string specifying the geocoding [endpoint][67] to query. Options are `mapbox.places` and `mapbox.places-permanent`. The `mapbox.places-permanent` mode requires an enterprise license for permanent geocodes. (optional, default `'mapbox.places'`)
    -   `options.localGeocoderOnly` **[Boolean][62]?** If `true`, indicates that the localGeocoder results should be the only ones returned to the user. If `false`, indicates that the localGeocoder results should be combined with those from the Mapbox API.

### Examples

```javascript
var geocoder = new MapboxGeocoder({ accessToken: mapboxgl.accessToken });
map.addControl(geocoder);
```

Returns **[MapboxGeocoder][68]** `this`

### addTo

Add the geocoder to a container. The container can be either a `mapboxgl.Map` or a reference to an HTML `class` or `id`.

If the container is a `mapboxgl.Map`, this function will behave identically to ```Map.addControl(geocoder)``.
If the container is an HTML```id`or`class\`, the geocoder will be appended to that element.

This function will throw an error if the container is not either a map or a `class`/`id` reference.
It will also throw an error if the referenced HTML element cannot be found in the `document.body`.

For example, if the HTML body contains the element `<div id='geocoder-container'></div>`, the following script will append the geocoder to `#geocoder-container`:

```javascript
var geocoder = new MapboxGeocoder({ accessToken: mapboxgl.accessToken });
geocoder.addTo('#geocoder-container');
```

#### Parameters

-   `container` **([String][57] | mapboxgl.Map)** A reference to the container to which to add the geocoder

### clear

Clear and then focus the input.

#### Parameters

-   `ev` **[Event][69]?** the event that triggered the clear, if available

### query

Set & query the input

#### Parameters

-   `searchInput` **[string][57]** location name or other search input

Returns **[MapboxGeocoder][68]** this

### setInput

Set input

#### Parameters

-   `searchInput` **[string][57]** location name or other search input

Returns **[MapboxGeocoder][68]** this

### setProximity

Set proximity

#### Parameters

-   `proximity` **[Object][56]** The new options.proximity value. This is a geographical point given as an object with latitude and longitude properties.

Returns **[MapboxGeocoder][68]** this

### getProximity

Get proximity

Returns **[Object][56]** The geocoder proximity

### setRenderFunction

Set the render function used in the results dropdown

#### Parameters

-   `fn` **[Function][65]** The function to use as a render function. This function accepts a single [Carmen GeoJSON][66] object as input and returns a string.

Returns **[MapboxGeocoder][68]** this

### getRenderFunction

Get the function used to render the results dropdown

Returns **[Function][65]** the render function

### setLanguage

Get the language to use in UI elements and when making search requests

Look first at the explicitly set options otherwise use the browser's language settings

#### Parameters

-   `language` **[String][57]** Specify the language to use for response text and query result weighting. Options are IETF language tags comprised of a mandatory ISO 639-1 language code and optionally one or more IETF subtags for country or script. More than one value can also be specified, separated by commas.

Returns **[MapboxGeocoder][68]** this

### getLanguage

Get the language to use in UI elements and when making search requests

Returns **[String][57]** The language(s) used by the plugin, if any

### getZoom

Get the zoom level the map will move to when there is no bounding box on the selected result

Returns **[Number][61]** the map zoom

### setZoom

Set the zoom level

#### Parameters

-   `zoom` **[Number][61]** The zoom level that the map should animate to when a `bbox` isn't found in the response. If a `bbox` is found the map will fit to the `bbox`.

Returns **[MapboxGeocoder][68]** this

### getFlyTo

Get the parameters used to fly to the selected response, if any

Returns **[MapboxGeocoder][68]** this

### setFlyTo

Set the flyTo options

#### Parameters

-   `flyTo` **([Object][56] \| [Boolean][62])** If false, animating the map to a selected result is disabled. If true, animating the map will use the default animation parameters. If an object, the object will be passed to the flyTo map method to specify a custom animation.

### getPlaceholder

Get the value of the placeholder string

Returns **[String][57]** The input element's placeholder value

### setPlaceholder

Set the value of the input element's placeholder

#### Parameters

-   `placeholder` **[String][57]** the text to use as the input element's placeholder

Returns **[MapboxGeocoder][68]** this

### getBbox

Get the bounding box used by the plugin

Returns **[Array][63]&lt;[Number][61]>** the bounding box, if any

### setBbox

Set the bounding box to limit search results to

#### Parameters

-   `bbox` **[Array][63]&lt;[Number][61]>** a bounding box given as an array in the format [minX, minY, maxX, maxY].

Returns **[MapboxGeocoder][68]** this

### getCountries

Get a list of the countries to limit search results to

Returns **[String][57]** a comma separated list of countries to limit to, if any

### setCountries

Set the countries to limit search results to

#### Parameters

-   `countries` **[String][57]** a comma separated list of countries to limit to

Returns **[MapboxGeocoder][68]** this

### getTypes

Get a list of the types to limit search results to

Returns **[String][57]** a comma separated list of types to limit to

### setTypes

Set the types to limit search results to

#### Parameters

-   `types`  
-   `countries` **[String][57]** a comma separated list of types to limit to

Returns **[MapboxGeocoder][68]** this

### getMinLength

Get the minimum number of characters typed to trigger results used in the plugin

Returns **[Number][61]** The minimum length in characters before a search is triggered

### setMinLength

Set the minimum number of characters typed to trigger results used by the plugin

#### Parameters

-   `minLength` **[Number][61]** the minimum length in characters

Returns **[MapboxGeocoder][68]** this

### getLimit

Get the limit value for the number of results to display used by the plugin

Returns **[Number][61]** The limit value for the number of results to display used by the plugin

### setLimit

Set the limit value for the number of results to display used by the plugin

#### Parameters

-   `limit` **[Number][61]** the number of search results to return

Returns **[MapboxGeocoder][68]** 

### getFilter

Get the filter function used by the plugin

Returns **[Function][65]** the filter function

### setFilter

Set the filter function used by the plugin.

#### Parameters

-   `filter` **[Function][65]** A function which accepts a Feature in the [Carmen GeoJSON][66] format to filter out results from the Geocoding API response before they are included in the suggestions list. Return `true` to keep the item, `false` otherwise.

Returns **[MapboxGeocoder][68]** this

### setOrigin

Set the geocoding endpoint used by the plugin.

#### Parameters

-   `origin` **[Function][65]** A function which accepts an HTTPS URL to specify the endpoint to query results from.

Returns **[MapboxGeocoder][68]** this

### getOrigin

Get the geocoding endpoint the plugin is currently set to

Returns **[Function][65]** the endpoint URL

### on

Subscribe to events that happen within the plugin.

#### Parameters

-   `type` **[String][57]** name of event. Available events and the data passed into their respective event objects are:-   **clear** `Emitted when the input is cleared`
    -   **loading** `{ query } Emitted when the geocoder is looking up a query`
    -   **results** `{ results } Fired when the geocoder returns a response`
    -   **result** `{ result } Fired when input is set`
    -   **error** `{ error } Error as string`
-   `fn` **[Function][65]** function that's called when the event is emitted.

Returns **[MapboxGeocoder][68]** this;

### off

Remove an event

#### Parameters

-   `type` **[String][57]** Event name.
-   `fn` **[Function][65]** Function that should unsubscribe to the event emitted.

Returns **[MapboxGeocoder][68]** this

## relatedTarget

If relatedTarget is not found, assume user targeted the suggestions list.
In that case, do not clear on blur. There are other edge cases where
ev.relatedTarget could be null. Clicking on list always results in null
relatedtarget because of upstream behavior in `suggestions`.

The ideal solution would be to check if ev.relatedTarget is a child of
the list. See issue #258 for details on why we can't do that yet.

[1]: #mapboxgeocoder

[2]: #parameters

[3]: #examples

[4]: #addto

[5]: #parameters-1

[6]: #clear

[7]: #parameters-2

[8]: #query

[9]: #parameters-3

[10]: #setinput

[11]: #parameters-4

[12]: #setproximity

[13]: #parameters-5

[14]: #getproximity

[15]: #setrenderfunction

[16]: #parameters-6

[17]: #getrenderfunction

[18]: #setlanguage

[19]: #parameters-7

[20]: #getlanguage

[21]: #getzoom

[22]: #setzoom

[23]: #parameters-8

[24]: #getflyto

[25]: #setflyto

[26]: #parameters-9

[27]: #getplaceholder

[28]: #setplaceholder

[29]: #parameters-10

[30]: #getbbox

[31]: #setbbox

[32]: #parameters-11

[33]: #getcountries

[34]: #setcountries

[35]: #parameters-12

[36]: #gettypes

[37]: #settypes

[38]: #parameters-13

[39]: #getminlength

[40]: #setminlength

[41]: #parameters-14

[42]: #getlimit

[43]: #setlimit

[44]: #parameters-15

[45]: #getfilter

[46]: #setfilter

[47]: #parameters-16

[48]: #setorigin

[49]: #parameters-17

[50]: #getorigin

[51]: #on

[52]: #parameters-18

[53]: #off

[54]: #parameters-19

[55]: #relatedtarget

[56]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object

[57]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String

[58]: https://api.mapbox.com

[59]: https://github.com/mapbox/mapbox-gl-js

[60]: https://docs.mapbox.com/mapbox-gl-js/api/#marker

[61]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number

[62]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Boolean

[63]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array

[64]: https://docs.mapbox.com/api/search/#data-types

[65]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Statements/function

[66]: https://github.com/mapbox/carmen/blob/master/carmen-geojson.md

[67]: https://docs.mapbox.com/api/search/#endpoints

[68]: #mapboxgeocoder

[69]: https://developer.mozilla.org/docs/Web/API/Event
